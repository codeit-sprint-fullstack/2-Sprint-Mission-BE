<!DOCTYPE html>

<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=3, user-scalable=yes"/>

<codeprint id="docuK-style">
<div class="docuK rendered"><div class="sec" id="docuK-log"></div></div>

<!-- From kipid.tistory CDN -->
<script src="https://tistory1.daumcdn.net/tistory/1468360/skin/images/jquery.js"></script>
<link rel="stylesheet" href="https://tistory1.daumcdn.net/tistory/1468360/skin/images/docuK-2.3.css">
<script src="https://tistory3.daumcdn.net/tistory/1468360/skin/images/docuK-prepare-2.3.js" charset="utf-8"></script>
</codeprint><!-- docuK-style -->

<meta charset="utf-8" name="description" content="DATABASE setup of Panda Market by kipid. 판다마켓을 위한 DATABASE 를 구축해 봅시다."/>

<codeprint class="SEE">
# DATABASE setup of Panda Market by kipid

판다마켓을 위한 DATABASE 를 구축해 봅시다.



## PH

<ul>
<li>2024-09-24 : First posting.</li>
</ul>



## TOC



## 기본: npx prisma init

```
npx prisma init --datasource-provider postgresql
```/

명령을 실행해서 다음과 같은 파일을 얻자.

```
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}
```/

<div class="p">
<code>.env</code> 파일 설정을 다음과 같이 하자.
</div>

```
DATABASE_URL="postgresql://postgres:[password]@localhost:5432/panda_market_dev?schema=public"
PORT=3000
```/

panda_market_dev DATABASE 가 없으면 알아서 만들어 준다.



## Schema 짜기.

```
model Product {
  id            String   @id @default(uuid())
  name          String
  description   String
  price         Float
  tags          String[]
  images        String[]
  favoriteCount Int
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
}
```/



### prisma superstruct

다음과 같은 제약 조건을 걸어주자.

```
import * as s from 'superstruct';
import isUuid from 'is-uuid';

const Uuid = s.define('Uuid', (value) => isUuid.v4(value));

export const CreateProduct = s.object({
	name: s.size(s.string(), 1, 10),
	description: s.size(s.string(), 10, 100),
	price: s.min(s.number(), 0),
	tags: s.set(s.string()),
	images: s.set(s.string()),
	favoriteCount: s.min(s.integer(), 0),
});

export const PatchProduct = s.object({
	id: Uuid,
	...s.partial(CreateProduct),
});
```/


## RRA

<ol class="refs">
<li id="ref-panda-market"><a target="_blank" href="https://panda-market-by-kipid.netlify.app/">https://panda-market-by-kipid.netlify.app/</a></li>
<li id="prisma"><a target="_blank" href="https://kipid.tistory.com/entry/prisma-with-PostgreSQL-%EB%A5%BC-%EB%B0%B0%EC%9B%8C%EB%B4%85%EC%8B%9C%EB%8B%A4">kipid's blog :: prisma with PostgreSQL 를 배워봅시다.</a></li>
</ol>
</codeprint><!-- SEE -->

<codeprint id="docuK-script">
<script>
(function(m, $, undefined) {
m.printMode=true;
m.ripplesDisabled=true;
m.recoeveUserId="kipid";
m.recoCats="";
m.wait=1024;
m.delayPad=0;

/**
 *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
 *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
**/
window.disqus_config=function () {
	this.page.identifier="DATABASE-setup-of-View-My-StartUp"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
	this.page.url=`https://kipid.tistory.com/entry/${this.page.identifier}`; // Replace PAGE_URL with your page's canonical URL variable
};
})(window.k, jQuery);
</script>

<!-- From kipid.tistory CDN -->
<script src="https://tistory3.daumcdn.net/tistory/1468360/skin/images/docuK-postProcess-2.3.js" charset="utf-8"></script>
</codeprint><!-- docuK-script -->
